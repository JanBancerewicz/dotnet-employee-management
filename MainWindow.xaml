<Window x:Class="dotnet.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:dotnet"
        mc:Ignorable="d"
        Title="MainWindow" Height="600" Width="1200">
	
	<Window.Resources>
    <!-- Style dla DataGrid z wcięciami -->
    <Style x:Key="NestedDataGridStyle" TargetType="DataGrid">
        <Setter Property="Margin" Value="20,5,5,5" />
    </Style>

    <!-- Rekurencyjny szablon dla szczegółów wiersza -->
    <DataTemplate x:Key="RecursiveRowDetailsTemplate">
        <DataGrid ItemsSource="{Binding Podwladni}"
                  Style="{StaticResource NestedDataGridStyle}"
                  AutoGenerateColumns="False"
                  HeadersVisibility="Column"
                  CanUserAddRows="True"
                  CanUserDeleteRows="True"
                  CanUserSortColumns="True"
                  IsReadOnly="False"
                  SelectionMode="Single"
                  SelectionChanged="PodwladniDataGrid_SelectionChanged"
                  AddingNewItem="SubordinatesGrid_AddingNewItem">
            
            <DataGrid.Columns>
                <DataGridTextColumn Header="Imię" Binding="{Binding Imie}" />
                <DataGridTextColumn Header="Nazwisko" Binding="{Binding Nazwisko}" />
                <DataGridTextColumn Header="Stanowisko" Binding="{Binding Stanowisko}" />
                <DataGridTextColumn Header="Staż" Binding="{Binding Staz}" />
                <DataGridTextColumn Header="Pensja" Binding="{Binding Pensja}" />
                <DataGridTextColumn Header="Premia" Binding="{Binding Info.Premia}" />
                <DataGridTextColumn Header="Ocena" Binding="{Binding Info.OcenaPracownika}" />
                <DataGridComboBoxColumn Header="Wykształcenie"
                    SelectedItemBinding="{Binding Info.Wyksztalcenie}"
                    ItemsSource="{x:Static local:PoziomWyksztalceniaHelper.AllValues}" />
                
                <DataGridTemplateColumn Header="Usuń">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Button Content="USUŃ" Click="DeleteEmployee_Click" Padding="2"/>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                
                <DataGridTemplateColumn Header="Dodaj podwładnego">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Button Content="DODAJ" Click="AddSubordinate_Click" Padding="2"/>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
            
            <!-- Rekurencyjne użycie tego samego szablonu -->
            <DataGrid.RowDetailsTemplate>
                <StaticResource ResourceKey="RecursiveRowDetailsTemplate"/>
            </DataGrid.RowDetailsTemplate>
        </DataGrid>
    </DataTemplate>
</Window.Resources>
    <StackPanel>
        <Menu>
            <MenuItem Header="Application">
                <MenuItem Header="Generate data" Click="Generate_Click"/>
                <MenuItem Header="Version" Click="Version_Click"/>
                <Separator/>
                <MenuItem Header="Exit" Click="Exit_Click"/>
            </MenuItem>

        </Menu>
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="1.5*" />
                <ColumnDefinition Width="5" />
                <!-- Separator -->
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <Grid.RowDefinitions>
                <RowDefinition MinHeight="500" Height="*" />
            </Grid.RowDefinitions>

            <!-- Lewy panel -->
            <StackPanel Grid.Column="0" Margin="0">
			<DataGrid x:Name="PracownicyDataGrid"
                    AutoGenerateColumns="False"
                    CanUserAddRows="True"
                    CanUserDeleteRows="True"
                    CanUserSortColumns="True"
                    Margin="10"
                    ItemsSource="{Binding Pracownicy}"
                    RowDetailsVisibilityMode="VisibleWhenSelected"
					HeadersVisibility="Column"
                    AddingNewItem="SubordinatesGrid_AddingNewItem"
					SelectionMode="Single"
					SelectionChanged="PracownicyDataGrid_SelectionChanged"
						  >

					<DataGrid.Columns>
						<DataGridTextColumn Header="Imię" Binding="{Binding Imie}" />
						<DataGridTextColumn Header="Nazwisko" Binding="{Binding Nazwisko}" />
						<DataGridTextColumn Header="Staż" Binding="{Binding Staz}" />
						<DataGridTextColumn Header="Pensja" Binding="{Binding Pensja}" />
						<DataGridTextColumn Header="Stanowisko" Binding="{Binding Stanowisko}" />
						<DataGridTextColumn Header="Premia" Binding="{Binding Info.Premia}" />
						<DataGridTextColumn Header="Ocena" Binding="{Binding Info.OcenaPracownika}" />
						<DataGridComboBoxColumn Header="Wykształcenie"
                        SelectedItemBinding="{Binding Info.Wyksztalcenie, Mode=TwoWay}"
						ItemsSource="{x:Static local:PoziomWyksztalceniaHelper.AllValues}" />
						<DataGridTemplateColumn Header="Usuń">
							<DataGridTemplateColumn.CellTemplate>
								<DataTemplate>
									<Button Content="USUŃ"
											Click="DeleteEmployee_Click"
											ToolTip="Usuń pracownika"
											Padding="2" />
								</DataTemplate>
							</DataGridTemplateColumn.CellTemplate>
						</DataGridTemplateColumn>
						<DataGridTemplateColumn Header="Dodaj podwładnego">
							<DataGridTemplateColumn.CellTemplate>
								<DataTemplate>
									<Button Content="DODAJ"
											Click="AddSubordinate_Click"
											ToolTip="Dodaj podwładnego"
											Padding="2"/>
								</DataTemplate>
							</DataGridTemplateColumn.CellTemplate>
						</DataGridTemplateColumn>
					</DataGrid.Columns>

					<DataGrid.RowDetailsTemplate>
						<DataTemplate>
							<DataGrid ItemsSource="{Binding Podwladni}"
								AutoGenerateColumns="False"
								HeadersVisibility="Column"
								Margin="0,5,0,5"
								CanUserAddRows="True"
								CanUserDeleteRows="True"
								CanUserSortColumns="True"
								IsReadOnly="False"
								SelectionMode="Single"
								SelectionChanged="PodwladniDataGrid_SelectionChanged"
								PreviewMouseLeftButtonDown="SubordinateDataGrid_MouseLeftButtonDown">
								<DataGrid.Columns>
									<DataGridTextColumn Header="Imię" Binding="{Binding Imie, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
									<DataGridTextColumn Header="Nazwisko" Binding="{Binding Nazwisko, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
									<DataGridTextColumn Header="Stanowisko" Binding="{Binding Stanowisko, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
									<DataGridTextColumn Header="Staż" Binding="{Binding Staz, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
									<DataGridTextColumn Header="Pensja" Binding="{Binding Pensja, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
									<DataGridTextColumn Header="Premia" Binding="{Binding Info.Premia, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
									<DataGridTextColumn Header="Ocena" Binding="{Binding Info.OcenaPracownika, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
									<DataGridComboBoxColumn Header="Wykształcenie"
									SelectedItemBinding="{Binding Info.Wyksztalcenie, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
									ItemsSource="{x:Static local:PoziomWyksztalceniaHelper.AllValues}"
 />
									
									<DataGridTemplateColumn Header="Usuń">
										<DataGridTemplateColumn.CellTemplate>
											<DataTemplate>
												<Button Content="USUŃ"
														Click="DeleteEmployee_Click"
														ToolTip="Usuń pracownika"
														Padding="2" />
											</DataTemplate>
										</DataGridTemplateColumn.CellTemplate>
									</DataGridTemplateColumn>
									<DataGridTemplateColumn Header="Dodaj podwładnego">
										<DataGridTemplateColumn.CellTemplate>
											<DataTemplate>
												<Button Content="DODAJ"
														Click="AddSubordinate_Click"
														ToolTip="Dodaj podwładnego"
														Padding="2"/>
											</DataTemplate>
										</DataGridTemplateColumn.CellTemplate>
									</DataGridTemplateColumn>
								</DataGrid.Columns>
							</DataGrid>
						</DataTemplate>
					</DataGrid.RowDetailsTemplate>

				</DataGrid>


			</StackPanel>

            <!-- Separator -->
            <Border Grid.Column="1" Background="Gray" />

            <!-- Prawy panel -->
			<StackPanel Grid.Column="2" Margin="10" x:Name="InspectorPanel">
				<TextBlock Text="Szczegóły pracownika" FontWeight="Bold" FontSize="16" Margin="0,0,0,10"/>

				<TextBlock Text="Imię:"/>
				<TextBox x:Name="ImieBox" IsReadOnly="True"/>

				<TextBlock Text="Nazwisko:" Margin="0,10,0,0"/>
				<TextBox x:Name="NazwiskoBox" IsReadOnly="True"/>

				<TextBlock Text="Stanowisko:" Margin="0,10,0,0"/>
				<TextBox x:Name="StanowiskoBox" IsReadOnly="True"/>

				<TextBlock Text="Staż:" Margin="0,10,0,0"/>
				<TextBox x:Name="StazBox" IsReadOnly="True"/>

				<TextBlock Text="Pensja:" Margin="0,10,0,0"/>
				<TextBox x:Name="PensjaBox" IsReadOnly="True"/>

				<TextBlock Text="Premia:" Margin="0,10,0,0"/>
				<TextBox x:Name="PremiaBox" IsReadOnly="True"/>

				<TextBlock Text="Ocena pracownika:" Margin="0,10,0,0"/>
				<TextBox x:Name="OcenaBox" IsReadOnly="True"/>

				<TextBlock Text="Wykształcenie:" Margin="0,10,0,0"/>
				<TextBox x:Name="WyksztalcenieBox" IsReadOnly="True"/>

				<TextBlock Text="Liczba wszystkich podwładnych:" Margin="0,10,0,0"/>
				<TextBox x:Name="PodwladniBox" IsReadOnly="True"/>
			</StackPanel>

		</Grid>


    </StackPanel>
</Window>
